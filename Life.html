<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>YoniOS Pro</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;600;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Rubik', sans-serif; background-color: #F3F4F6; }
        [x-cloak] { display: none !important; }
        
        /* ×× ×™××¦×™×•×ª */
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* ×¢×™×¦×•×‘ ×¨×§×¢ ×•×–×›×•×›×™×ª */
        .bg-mesh {
            background: radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                        radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                        radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            background-color: #111827;
        }
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .glass-dark {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        /* ×”×¡×ª×¨×ª ×¤×¡ ×’×œ×™×œ×” ××‘×œ ×”×©××¨×ª ×¤×•× ×§×¦×™×•× ×œ×™×•×ª */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 h-screen overflow-hidden flex flex-col" x-data="app()" x-init="initData()">

    <div class="fixed top-0 left-0 w-full h-[30vh] bg-mesh rounded-b-[3rem] shadow-2xl z-0"></div>

    <header class="relative z-10 p-6 pt-8 text-white flex justify-between items-start">
        <div>
            <p class="text-gray-300 text-sm mb-1">×‘×¨×•×š ×©×•×‘×š,</p>
            <h1 x-show="!editMode" class="text-3xl font-black tracking-tight" x-text="settings.appName"></h1>
            <input x-show="editMode" x-model="settings.appName" class="text-2xl font-bold bg-white/20 border-white/30 text-white rounded px-2 w-40 backdrop-blur-sm">
            
            <div class="mt-4 flex items-center gap-3">
                <div class="w-32 h-2 bg-gray-700 rounded-full overflow-hidden">
                    <div class="h-full bg-gradient-to-r from-blue-400 to-purple-400 transition-all duration-1000" :style="`width: ${Math.min(coins/10, 100)}%`"></div>
                </div>
                <span class="text-xs font-bold text-blue-300">LVL <span x-text="Math.floor(coins/100) + 1"></span></span>
            </div>
        </div>

        <button @click="editMode = !editMode" 
            class="w-10 h-10 rounded-full glass-dark flex items-center justify-center text-white transition-transform active:scale-95">
            <i class="fa-solid" :class="editMode ? 'fa-check text-green-400' : 'fa-gear'"></i>
        </button>
    </header>

    <div class="relative z-10 px-6 -mt-4 mb-4">
        <div class="glass shadow-xl rounded-3xl p-5 flex justify-between items-center transform transition-all">
            <div>
                <p class="text-gray-500 text-xs font-bold uppercase tracking-wider">×”×‘× ×§ ×©×œ×™</p>
                <div class="flex items-baseline gap-1">
                    <span class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600" x-text="coins"></span>
                    <span class="text-2xl">ğŸ’</span>
                </div>
                <input x-show="editMode" type="number" x-model="coins" class="mt-2 w-full bg-gray-100 rounded p-1 border border-gray-300">
            </div>
            <div class="w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-600 text-xl shadow-inner">
                <i class="fa-solid fa-wallet"></i>
            </div>
        </div>
    </div>

    <main class="relative z-10 flex-1 overflow-y-auto no-scrollbar px-6 pb-24 fade-in">
        
        <div x-show="currentTab === 'tasks'">
            <div class="flex justify-between items-end mb-4">
                <h2 class="text-xl font-bold text-gray-800">××©×™××•×ª ×œ×”×™×•×</h2>
                <button @click="addItem('tasks')" class="text-blue-600 bg-blue-100 px-3 py-1 rounded-full text-xs font-bold shadow-sm active:scale-95">
                    <i class="fa-solid fa-plus mr-1"></i> ×”×•×¡×£
                </button>
            </div>
            
            <div class="space-y-3">
                <template x-for="(task, index) in tasks" :key="index">
                    <div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex items-center gap-4 relative overflow-hidden group transition-all duration-300"
                         :class="{'opacity-60': task.completed, 'border-blue-500 ring-2 ring-blue-100': editMode}">
                        
                        <button x-show="editMode" @click="deleteItem('tasks', index)" class="absolute left-0 top-0 h-full w-12 bg-red-500 text-white z-20 flex items-center justify-center">
                            <i class="fa-solid fa-trash"></i>
                        </button>

                        <div @click="!editMode && toggleTask(task)" class="w-6 h-6 rounded-full border-2 flex items-center justify-center cursor-pointer transition-colors z-10"
                             :class="task.completed ? 'bg-green-500 border-green-500' : 'border-gray-300'">
                            <i x-show="task.completed" class="fa-solid fa-check text-white text-xs"></i>
                        </div>

                        <div class="flex-1 z-10">
                            <input x-show="editMode" x-model="task.title" class="w-full bg-gray-50 p-1 rounded mb-1">
                            <p x-show="!editMode" class="font-bold text-gray-800" :class="{'line-through text-gray-400': task.completed}" x-text="task.title"></p>
                            
                            <div class="flex items-center gap-2 mt-1">
                                <span class="text-[10px] bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full font-bold">
                                    +<span x-text="task.reward"></span> <span x-show="editMode"><input type="number" x-model="task.reward" class="w-8 bg-transparent text-center"></span> XP
                                </span>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </div>

        <div x-show="currentTab === 'shop'" x-cloak>
            <div class="flex justify-between items-end mb-4">
                <h2 class="text-xl font-bold text-gray-800">××¨×§×˜×¤×œ×™×™×¡</h2>
                <button @click="addItem('shopItems')" class="text-purple-600 bg-purple-100 px-3 py-1 rounded-full text-xs font-bold shadow-sm">
                    <i class="fa-solid fa-plus mr-1"></i> ×”×•×¡×£
                </button>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <template x-for="(item, index) in shopItems" :key="index">
                    <div class="bg-white p-4 rounded-2xl shadow-sm flex flex-col justify-between h-40 relative border border-gray-100"
                         :class="{'border-blue-500 ring-2 ring-blue-100': editMode}">
                        
                        <button x-show="editMode" @click="deleteItem('shopItems', index)" class="absolute top-2 left-2 text-red-500 bg-white shadow rounded-full w-6 h-6 text-xs z-20">
                            <i class="fa-solid fa-trash"></i>
                        </button>

                        <div>
                            <div class="w-10 h-10 bg-gradient-to-br from-orange-100 to-yellow-100 rounded-full flex items-center justify-center text-orange-500 mb-3">
                                <i class="fa-solid fa-gift"></i>
                            </div>
                            <input x-show="editMode" x-model="item.name" class="w-full text-sm font-bold mb-1 bg-gray-50">
                            <h3 x-show="!editMode" class="font-bold text-gray-800 leading-tight" x-text="item.name"></h3>
                        </div>

                        <button @click="buyItem(item)" 
                                :disabled="coins < item.cost && !editMode"
                                class="mt-2 w-full py-2 rounded-xl text-xs font-bold transition-all active:scale-95 flex justify-center items-center gap-1"
                                :class="coins >= item.cost ? 'bg-gray-900 text-white shadow-lg shadow-gray-300' : 'bg-gray-200 text-gray-400'">
                            <span x-show="!editMode" x-text="item.cost"></span>
                            <input x-show="editMode" type="number" x-model="item.cost" class="w-10 text-black text-center rounded">
                            ğŸ’ ×¨×›×•×©
                        </button>
                    </div>
                </template>
            </div>
        </div>

        <div x-show="currentTab === 'habits'" x-cloak>
            <div class="flex justify-between items-end mb-4">
                <h2 class="text-xl font-bold text-gray-800">××¢×§×‘ ×”×¨×’×œ×™×</h2>
                <button @click="addItem('habits')" class="text-green-600 bg-green-100 px-3 py-1 rounded-full text-xs font-bold shadow-sm">
                    <i class="fa-solid fa-plus mr-1"></i> ×”×•×¡×£
                </button>
            </div>

             <div class="space-y-3">
                <template x-for="(habit, index) in habits" :key="index">
                    <div class="bg-white px-4 py-3 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center relative"
                         :class="{'border-blue-500 ring-2 ring-blue-100': editMode}">
                        
                         <button x-show="editMode" @click="deleteItem('habits', index)" class="absolute top-1/2 -translate-y-1/2 left-2 text-red-500 text-sm z-20 bg-red-50 p-2 rounded-full">
                            <i class="fa-solid fa-trash"></i>
                        </button>

                         <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full flex items-center justify-center text-lg transition-all"
                                 :class="habit.done ? 'bg-green-500 text-white shadow-green-200 shadow-lg scale-110' : 'bg-gray-100 text-gray-300'">
                                <i class="fa-solid" :class="habit.done ? 'fa-fire' : 'fa-fire'"></i>
                            </div>
                            <div>
                                <input x-show="editMode" x-model="habit.name" class="bg-gray-50 rounded p-1">
                                <h4 x-show="!editMode" class="font-bold text-gray-700" x-text="habit.name"></h4>
                                <p class="text-[10px] text-gray-400">×™×•××™ â€¢ 10 × ×§'</p>
                            </div>
                         </div>

                         <button x-show="!editMode" @click="toggleHabit(habit)" class="w-8 h-8 rounded-full border flex items-center justify-center transition-colors"
                            :class="habit.done ? 'bg-green-50 border-green-200 text-green-600' : 'border-gray-200 text-gray-300'">
                            <i class="fa-solid fa-check"></i>
                        </button>
                    </div>
                </template>
            </div>
            
            <button @click="resetHabits()" class="mt-8 w-full py-3 bg-white border border-gray-200 text-gray-500 rounded-2xl text-sm font-medium shadow-sm active:scale-95">
                ğŸ”„ ××¤×¡ ×™×•× ×—×“×©
            </button>
        </div>

    </main>

    <nav class="fixed bottom-4 left-4 right-4 bg-gray-900/90 backdrop-blur-lg text-white rounded-2xl p-2 shadow-2xl z-50 flex justify-around items-center border border-white/10">
        <template x-for="tab in tabs">
            <button 
                @click="currentTab = tab.id"
                class="flex flex-col items-center justify-center w-14 h-14 rounded-xl transition-all duration-300"
                :class="currentTab === tab.id ? 'bg-white/20 text-white shadow-lg scale-105' : 'text-gray-400 hover:text-white'">
                <i class="fa-solid text-lg mb-1" :class="tab.icon"></i>
                <span class="text-[10px] font-medium" x-text="tab.label"></span>
            </button>
        </template>
    </nav>

    <script>
        function app() {
            return {
                editMode: false,
                currentTab: 'tasks',
                coins: 0,
                settings: { appName: 'YoniOS' },
                tabs: [
                    { id: 'tasks', label: '××©×™××•×ª', icon: 'fa-list-check' },
                    { id: 'shop', label: '×—× ×•×ª', icon: 'fa-store' },
                    { id: 'habits', label: '×”×¨×’×œ×™×', icon: 'fa-heart-pulse' },
                ],
                tasks: [],
                shopItems: [],
                habits: [],

                initData() {
                    const savedData = localStorage.getItem('yonios_pro_v1');
                    if (savedData) {
                        const data = JSON.parse(savedData);
                        this.coins = data.coins;
                        this.tasks = data.tasks;
                        this.shopItems = data.shopItems;
                        this.habits = data.habits;
                        this.settings = data.settings || { appName: 'YoniOS' };
                    } else {
                        this.coins = 250;
                        this.tasks = [
                            { title: '×œ×¡×™×™× ××ª ×”××ª×¨ ×”×—×“×©', reward: 100, completed: false },
                            { title: '××™××•×Ÿ ×›×•×—', reward: 50, completed: false }
                        ];
                        this.shopItems = [
                            { name: '×§×¤×” ×§×¨ ××¤× ×§', cost: 40 },
                            { name: '×¢×¨×‘ ×¤×™×¦×”', cost: 200 }
                        ];
                        this.habits = [
                            { name: '×œ×§×•× ×‘-7 ×‘×‘×•×§×¨', done: false },
                            { name: '2 ×œ×™×˜×¨ ××™×', done: false }
                        ];
                    }

                    this.$watch('coins', () => this.save());
                    this.$watch('tasks', () => this.save());
                    this.$watch('shopItems', () => this.save());
                    this.$watch('habits', () => this.save());
                    this.$watch('settings', () => this.save());
                },

                save() {
                    const data = {
                        coins: parseInt(this.coins),
                        tasks: this.tasks,
                        shopItems: this.shopItems,
                        habits: this.habits,
                        settings: this.settings
                    };
                    localStorage.setItem('yonios_pro_v1', JSON.stringify(data));
                },

                celebrate() {
                    confetti({
                        particleCount: 100,
                        spread: 70,
                        origin: { y: 0.6 },
                        colors: ['#60A5FA', '#A78BFA', '#F472B6']
                    });
                },

                toggleTask(task) {
                    task.completed = !task.completed;
                    if (task.completed) {
                        this.coins = parseInt(this.coins) + parseInt(task.reward);
                        this.celebrate();
                    } else {
                        this.coins = parseInt(this.coins) - parseInt(task.reward);
                    }
                },

                toggleHabit(habit) {
                    habit.done = !habit.done;
                    if(habit.done) {
                        this.coins = parseInt(this.coins) + 10;
                        this.celebrate();
                    }
                    else this.coins = parseInt(this.coins) - 10;
                },

                buyItem(item) {
                    if (this.coins >= item.cost) {
                        if(confirm('×œ×¨×›×•×© ××ª ' + item.name + '?')) {
                            this.coins -= item.cost;
                            this.celebrate();
                        }
                    }
                },

                addItem(type) {
                    if(type === 'tasks') this.tasks.push({ title: '××©×™××” ×—×“×©×”', reward: 50, completed: false });
                    if(type === 'shopItems') this.shopItems.push({ name: '×¤×™× ×•×§ ×—×“×©', cost: 100 });
                    if(type === 'habits') this.habits.push({ name: '×”×¨×’×œ ×—×“×©', done: false });
                },

                deleteItem(type, index) {
                    if(confirm('×œ××—×•×§?')) {
                        this[type].splice(index, 1);
                    }
                },
                
                resetHabits() {
                    if(confirm('×™×•× ×—×“×© ×”×ª×—×™×œ?')) {
                        this.habits.forEach(h => h.done = false);
                    }
                }
            }
        }
    </script>
</body>
</html>
