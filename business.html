<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>× ×™×”×•×œ ×§×™×•×¡×§ - ×”×× ×›"×œ ×”××™× ×¡×•×¤×™ ğŸ¥¯</title>
    <style>
        :root {
            --bg: #111827;
            --card: #1f2937;
            --text: #f3f4f6;
            --accent: #6366f1; /* ××™× ×“×™×’×• */
            --green: #10b981;
            --red: #ef4444;
            --gold: #fbbf24;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- Header --- */
        header {
            background: #0f172a;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #374151;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 10;
        }

        .stats-box { text-align: center; }
        .label { font-size: 0.75rem; color: #9ca3af; }
        .value { font-size: 1.1rem; font-weight: bold; }
        .money { color: var(--green); }
        .level { color: var(--accent); }

        /* --- Main Game Area --- */
        #game-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
            transition: opacity 0.3s;
        }

        .question-card {
            background: var(--card);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid #374151;
            animation: floatIn 0.4s ease-out;
        }

        @keyframes floatIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .category-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        h2 { margin: 0 0 15px 0; font-size: 1.4rem; line-height: 1.3; }
        p { color: #d1d5db; line-height: 1.6; margin-bottom: 25px; font-size: 1rem; }

        /* --- Options --- */
        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            background: #374151;
            border: 2px solid transparent;
            color: white;
            padding: 16px;
            border-radius: 12px;
            font-size: 1rem;
            cursor: pointer;
            text-align: right;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .option-btn:active { transform: scale(0.98); }
        
        .option-btn.correct {
            background: rgba(16, 185, 129, 0.2);
            border-color: var(--green);
            color: var(--green);
        }
        
        .option-btn.wrong {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--red);
            color: var(--red);
        }

        .option-btn.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        /* --- Feedback Overlay --- */
        #feedback-overlay {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: rgba(0,0,0,0.9);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            pointer-events: none;
            opacity: 0;
            transition: all 0.3s;
            z-index: 100;
            border: 2px solid #555;
            min-width: 200px;
        }

        #feedback-overlay.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .feedback-icon { font-size: 3rem; display: block; margin-bottom: 10px; }
        .feedback-text { font-size: 1.5rem; font-weight: bold; }
        .feedback-sub { font-size: 1rem; color: #aaa; margin-top: 5px; }

        /* Progress Bar */
        #xp-bar-container {
            height: 6px;
            background: #374151;
            width: 100%;
            position: fixed;
            bottom: 0;
        }
        #xp-bar-fill {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.5s;
        }
    </style>
</head>
<body>

    <header>
        <div class="stats-box">
            <div class="label">×“×¨×’×”</div>
            <div class="value level" id="ui-level">1</div>
        </div>
        <div class="stats-box">
            <div class="label">××–×•××Ÿ</div>
            <div class="value money" id="ui-money">$10,000</div>
        </div>
        <div class="stats-box">
            <div class="label">XP</div>
            <div class="value" id="ui-xp">0</div>
        </div>
    </header>

    <div id="game-container">
        </div>

    <div id="feedback-overlay">
        <div class="feedback-icon" id="fb-icon">âœ…</div>
        <div class="feedback-text" id="fb-text">××¦×•×™×Ÿ!</div>
        <div class="feedback-sub" id="fb-sub">+$500</div>
    </div>

    <div id="xp-bar-container">
        <div id="xp-bar-fill"></div>
    </div>

    <script>
        // --- ×§×˜×’×•×¨×™×•×ª ×¢×¡×§ ---
        const CATEGORIES = {
            finance:  { name: "×¤×™× × ×¡×™×",       color: "#10b981" },
            marketing:{ name: "×©×™×•×•×§",         color: "#f472b6" },
            hr:       { name: "× ×™×”×•×œ ×¢×•×‘×“×™×",  color: "#a78bfa" },
            ops:      { name: "×ª×¤×¢×•×œ",         color: "#fbbf24" },
            crisis:   { name: "× ×™×”×•×œ ××©×‘×¨×™×",  color: "#ef4444" }
        };

        // --- ×©××œ×•×ª ×‘×¡×™×¡ (×˜×•×˜×•×¨×™××œ) ---
        const BASE_QUESTIONS = [
            {
                id: 'cashflow-basic',
                cat: 'finance',
                t: "×ª×–×¨×™× ×‘×§×™×•×¡×§",
                q: "×™×•× ×¨××©×•×Ÿ ×”×™×” ×—×–×§, ××‘×œ ×‘×¡×•×£ ×©×‘×•×¢ ××™×Ÿ ×œ×š ×›×¡×£ ×œ×©×œ× ×œ×¡×¤×§×™×. ××” ×‘×¢×¦× ×”×‘×¢×™×”?",
                opts: [
                    "×‘×¢×™×™×ª ×ª×–×¨×™× â€“ ×”×›×¡×£ × ×›× ×¡ ×œ× ×‘×–××Ÿ",
                    "×”××—×™×¨×™× ×©×œ×š ×™×§×¨×™× ××“×™",
                    "×”×¢×•×‘×“×™× ××¨×•×•×™×—×™× ×™×•×ª×¨ ××“×™"
                ],
                a: 0
            },
            {
                id: 'marketing-basic',
                cat: 'marketing',
                t: "××™ ×§×”×œ ×”×™×¢×“ ×©×œ×š?",
                q: "×§×™×•×¡×§ ×—×œ×‘×™ ×‘××¨×›×–, ×œ×™×“ ×ª×—× ×ª ××•×˜×•×‘×•×¡ ×•×¨×—×•×‘ ×¨××©×™. ×¢×œ ××™ ×›×“××™ ×œ×”×ª××§×“?",
                opts: [
                    "×›×•×œ× â€“ ×›×œ ××™ ×©×¢×•×‘×¨ ×‘×¨×—×•×‘",
                    "×¢×•×‘×“×™× ×•×× ×©×™× ×××”×¨×™× ×‘×©×¢×•×ª ×¢×•××¡ + ×ª×œ××™×“×™× ××—×¨×™ ×”×œ×™××•×“×™×",
                    "×¨×§ ×ª×™×™×¨×™× ××—×•\"×œ"
                ],
                a: 1
            },
            {
                id: 'hr-basic',
                cat: 'hr',
                t: "×¢×•×‘×“ ×‘××©××¨×ª ×‘×¢×¨×‘",
                q: "×¢×•×‘×“ ×—×“×© ×¢×•×‘×“ ×¡×‘×™×¨, ××‘×œ ×œ× ××¡×•×“×¨, ×××—×¨ ×œ×¤×¢××™×, ×•×©×•×›×— ×œ× ×§×•×ª. ××” ×”×›×™ ×—×›×?",
                opts: [
                    "×œ×¤×˜×¨ ××™×“ â€“ ××™×Ÿ ×–××Ÿ ×œ×”×ª×¢×¡×§",
                    "×œ×ª×ª ×œ×• ×©×™×—×” ×‘×¨×•×¨×”, ×¦×™×¤×™×•×ª, ×•×—× ×™×›×” ×œ××©××¨×ª-×©×ª×™×™×",
                    "×œ×”×ª×¢×œ×, ×›×œ ×¢×•×“ ×”×•× ××•×¦×™× ×× ×•×ª"
                ],
                a: 1
            },
            {
                id: 'ops-basic',
                cat: 'ops',
                t: "× ×™×”×•×œ ××œ××™ â€“ ×’×‘×™× ×•×ª",
                q: "×”××§×¨×¨ ××¤×•×¦×¥ ×‘×’×‘×™× ×•×ª, ×—×œ×§ ×›×‘×¨ ××ª×§×¨×‘×•×ª ×œ×ª×•×§×£. ××” ×”×›×™ × ×›×•×Ÿ ×œ×¢×©×•×ª?",
                opts: [
                    "×œ×”×–××™×Ÿ ×¢×•×“ ×›×“×™ ×©×œ× ×™×—×¡×¨",
                    "×œ×¢×©×•×ª ××‘×¦×¢ ×¢×œ ×× ×•×ª ×¢× ×’×‘×™× ×” ×œ×¤× ×™ ×©×¤×’ ×ª×•×§×£",
                    "×œ×–×¨×•×§ ×”×›×•×œ ×•×œ×”×ª×—×™×œ ×××¤×¡"
                ],
                a: 1
            }
        ];

        // --- ×¡×¤×¨×™×™×ª ××™×¨×•×¢×™× ---
        const EVENTS = [
            {
                id: 'cheese-shortage',
                cat: 'ops',
                title: "× ×’××¨×” ×’×‘×™× ×” ×¦×”×•×‘×” ×‘×××¦×¢ ×¢×¨×‘",
                text: "×©×¢×ª ×¢×•××¡ ×‘×¢×¨×‘, ×•×ª×•×š ×›×“×™ ×¢×‘×•×“×” ××ª×” ×§×•×œ×˜ ×©× ×©××¨ ×œ×š ×’×‘×™× ×” ×¦×”×•×‘×” ×œ×¢×•×“ 5 ×˜×•×¡×˜×™× ×‘×œ×‘×“.",
                opts: [
                    "×¢×•×¦×¨ ××›×™×¨×” ×©×œ ×˜×•×¡×˜×™× ×•× ×•×ª×Ÿ ××©×”×• ××—×¨ ×‘××§×•××",
                    "×××©×™×š ×œ××›×•×¨ ×›×¨×’×™×œ ×•××§×•×•×” ×©×œ× ×™×©×™××• ×œ×‘ ×›×©×™×’××¨",
                    "×¨×¥ ×œ××›×•×œ×ª ×”×§×¨×•×‘×” ×•×§×•× ×” ×’×‘×™× ×” ×‘××—×™×¨ ×™×§×¨ ×™×•×ª×¨"
                ],
                correctIdx: 2,
                costBase: 250,
                rewardBase: 600
            },
            {
                id: 'milk-expire',
                cat: 'ops',
                title: "×—×œ×‘ ×¢×œ ×”×¡×£",
                text: "××ª×” ×¨×•××” ×©×‘××§×¨×¨ ×™×© 6 ×§×¨×˜×•× ×™ ×—×œ×‘ ×©×ª×•×§×£ ×©×œ×”× ×”×™×•× ×‘×œ×™×œ×”.",
                opts: [
                    "×–×•×¨×§ ×”×›×œ â€“ ×œ× ××ª×¢×¡×§",
                    "××›× ×™×¡ ××•×ª× ×œ×©×™××•×© ×‘×× ×•×ª ×—××•×ª ×•×©×ª×™×™×” ×—××” ×”×™×•×, ×•×¢×•×©×” ××‘×¦×¢",
                    "××¢×¨×‘×‘ ×¢× ×—×“×©×™× ×›×“×™ '×œ× ×œ×”×¨×’×™×©'"
                ],
                correctIdx: 1,
                costBase: 300,
                rewardBase: 700
            },
            {
                id: 'supplier-price-up',
                cat: 'finance',
                title: "×¡×¤×§ ×”×’×‘×™× ×•×ª ××¢×œ×” ××—×™×¨",
                text: "×¡×¤×§ ×”×’×‘×™× ×•×ª ××•×“×™×¢ ×©×”××—×™×¨ ×¢×•×œ×” ×‘-12% ××”×—×•×“×© ×”×‘×.",
                opts: [
                    "××¢×œ×” ××—×™×¨ ×œ×›×œ ×”×× ×•×ª ××™×“ ×‘××•×ª×• ××—×•×–",
                    "×× ×¡×” ×œ×”×ª××§×—, ×œ×‘×—×•×Ÿ ×¡×¤×§×™× × ×•×¡×¤×™×, ×•×œ×”×—×œ×™×˜ ×œ×¤×™ ××¡×¤×¨×™×",
                    "××ª×¢×œ×, '×§×˜×Ÿ ×¢×œ×™×™', ×•×××©×™×š ×¨×’×™×œ"
                ],
                correctIdx: 1,
                costBase: 0,
                rewardBase: 900
            },
            {
                id: 'slow-day-cash',
                cat: 'finance',
                title: "×™×•× ×—×œ×© ×‘×§×•×¤×”",
                text: "×”×™×• ×›××” ×™××™× ×—×œ×©×™× ×‘×¨×¦×£ ×•×”×§×•×¤×” ×“×œ×”. ××—×¨ ×¦×¨×™×š ×œ×©×œ× ×œ×¡×¤×§ ×™×¨×§×•×ª.",
                opts: [
                    "××‘×§×© ×“×—×™×™×” ××”×¡×¤×§ ×œ-3 ×™××™× ×•××¨×™× ××‘×¦×¢ ××™×•×—×“ ×œ×”×™×•× ×‘×¢×¨×‘",
                    "×œ×•×§×— ×”×œ×•×•××” ×™×•××™×ª ××”×¨×™×‘×™×ª ×”×›×™ ×™×§×¨×”",
                    "×œ× ××©×œ× ×‘×–××Ÿ ×•××ª×¢×œ× ××”×¡×¤×§"
                ],
                correctIdx: 0,
                costBase: 500,
                rewardBase: 1200
            },
            {
                id: 'bad-review',
                cat: 'marketing',
                title: "×‘×™×§×•×¨×ª ×¨×¢×” ×‘×•×•××˜×¡××¤",
                text: "×œ×§×•×—×” ××¢×œ×” ×‘×§×‘×•×¦×ª ×©×›×•× ×” ×”×•×“×¢×”: '×”××œ××•×•×— ×©×œ×”× ×”×’×™×¢ ×§×¨, ×œ× ××•××œ×¥'.",
                opts: [
                    "×œ×”×ª×¢×œ× â€“ '×–×” ×¨×§ ××—×ª'",
                    "×œ×”×’×™×‘ ×‘× ×™××•×¡, ×œ×”×ª× ×¦×œ ×•×œ×”×¦×™×¢ ×œ×” ×¤×™×¦×•×™/×× ×” ×—×“×©×”",
                    "×œ×”×ª×•×•×›×— ××™×ª×” ×‘×¤×•××‘×™ ×•×œ×”××©×™× ××•×ª×”"
                ],
                correctIdx: 1,
                costBase: 200,
                rewardBase: 900
            },
            {
                id: 'good-review',
                cat: 'marketing',
                title: "×‘×™×§×•×¨×ª ××˜×•×¨×¤×ª ×œ×˜×•×‘×”",
                text: "×œ×§×•×— ×›×ª×‘ ×¤×•×¡×˜ ××—××™× ×××•×“ ×¢×œ×™×š: '×”×˜×•×¡×˜ ×”×›×™ ×˜×•×‘ ×‘×©×›×•× ×”, ×©×™×¨×•×ª ××“×”×™×'.",
                opts: [
                    "×œ× ×œ×”×’×™×‘ â€“ ×©×œ× ×™×—×©×‘×• ×©××ª×” ×œ×—×•×¥",
                    "×œ×”×•×“×•×ª ×œ×• ×‘×¤×•××‘×™, ×œ×©×ª×£ ×œ×¡×˜×•×¨×™, ×•×œ×”×¦×™×¢ ×œ×• ×”×¤×ª×¢×” ×‘×¤×¢× ×”×‘××”",
                    "×œ×”×•×¨×™×“ ××ª ×”×¨××” ×›×“×™ ×©×œ× ×™×¢××™×¡×• ×¢×œ×™×š ×¢×‘×•×“×”"
                ],
                correctIdx: 1,
                costBase: 100,
                rewardBase: 800
            },
            {
                id: 'employee-late',
                cat: 'hr',
                title: "×¢×•×‘×“ ×××—×¨ ×§×‘×•×¢",
                text: "×¢×•×‘×“ ××©××¨×ª ×¢×¨×‘ ×××—×¨ ×›××¢×˜ ×›×œ ×¤×¢× 10â€“15 ×“×§×•×ª, ××‘×œ ×¢×•×‘×“ ×˜×•×‘ ×‘×–××Ÿ ×”××©××¨×ª.",
                opts: [
                    "×œ×”×ª×¢×œ× â€“ ×”×¢×™×§×¨ ×©×¢×•×‘×“ ×˜×•×‘",
                    "×œ×©×‘×ª ××™×ª×• ×¢×œ ×¦×™×¤×™×•×ª ×‘×¨×•×¨×•×ª, ×œ×”×’×“×™×¨ ×’×‘×•×œ×•×ª ×•×¡× ×§×¦×™×” ×¢×œ ××™×—×•×¨×™× ×—×•×–×¨×™×",
                    "×œ×”×©×¤×™×œ ××•×ª×• ××•×œ ×›×•×œ× ×›×“×™ ×©×™×œ××“"
                ],
                correctIdx: 1,
                costBase: 0,
                rewardBase: 700
            },
            {
                id: 'employee-raise',
                cat: 'hr',
                title: "×¢×•×‘×“×ª ×•×ª×™×§×” ××‘×§×©×ª ×”×¢×œ××”",
                text: "×¢×•×‘×“×ª ×¨×¦×™× ×™×ª, ×—×¦×™ ×©× ×” ××¦×œ×š, ××‘×§×©×ª ×¢×•×“ 3 â‚ª ×œ×©×¢×”.",
                opts: [
                    "×œ×–×¨×•×§ ××•×ª×” ×•×œ×”×‘×™× ××™×©×”×™ ×—×“×©×” ×•×–×•×œ×”",
                    "×œ×‘×“×•×§ ××¡×¤×¨×™× â€“ ×œ×¨××•×ª ×›××” ×”×™× ×©×•×•×” ×œ×¢×¡×§, ×•×× ×›×Ÿ ×œ×”×¢×œ×•×ª ×¢× ×¦×™×¤×™×•×ª ×‘×¨×•×¨×•×ª",
                    "×œ×”×‘×˜×™×— ×œ×” ×”×¢×œ××” '×—×•×“×© ×”×‘×' ×‘×œ×™ ×›×•×•× ×” ×××™×ª×™×ª"
                ],
                correctIdx: 1,
                costBase: 400,
                rewardBase: 1000
            },
            {
                id: 'line-mess',
                cat: 'ops',
                title: "×ª×•×¨ ××ª×¤×•×¦×¥",
                text: "×¢×•××¡ ×¢× ×§, ×ª×•×¨ ×™×•×¦× ××”××§×•×, ×—×œ×§ ××”×œ×§×•×—×•×ª ××ª×—×™×œ×™× ×œ×”×ª×¢×¦×‘×Ÿ.",
                opts: [
                    "×œ×¦×¢×§ ×¢×œ ×›×•×œ× ×©×™×™×¨×’×¢×•",
                    "×œ××¨×’×Ÿ ×ª×”×œ×™×š: ××—×“ ×œ×•×§×— ×”×–×× ×•×ª, ××—×“ ××›×™×Ÿ, ××—×“ ××•×¦×™×, ×•×œ×”×¨×’×™×¢ ×‘×—×™×•×š",
                    "×œ×¡×’×•×¨ ×—×¦×™ ×ª×¤×¨×™×˜ ×›×“×™ ×©×™×”×™×” ×¤×—×•×ª ××•×¨×›×‘"
                ],
                correctIdx: 1,
                costBase: 300,
                rewardBase: 1100
            },
            {
                id: 'fridge-broken',
                cat: 'crisis',
                title: "×”××§×¨×¨ ×”×¨××©×™ ×”×ª×§×œ×§×œ",
                text: "×‘×•×§×¨, ××ª×” ××’×™×¢ ×•×¨×•××” ×©×”××§×¨×¨ ×›×‘×•×™, ×—×œ×§ ××”×’×‘×™× ×•×ª ×•×”×—×œ×‘ ×›×‘×¨ ×—××™××™×.",
                opts: [
                    "×œ×”××©×™×š ×œ×”×©×ª××© ×‘×—×œ×§ ×©× ×¨××” ×‘×¡×“×¨, '×—×‘×œ ×¢×œ ×”×›×¡×£'",
                    "×œ×–×¨×•×§ ××ª ××” ×©××¡×•×›×Ÿ, ×œ×§×¨×•× ×œ×˜×›× ××™ ×“×—×•×£, ×•×œ×”×‘×™× ××§×¨×¨ ×’×™×‘×•×™ ×× ×¦×¨×™×š",
                    "×œ×©×™× ×”×›×•×œ ×©×•×‘ ×‘××§×¨×¨ ××—×¨×™ ×©×ª×ª×§×Ÿ, '×–×” ×™×ª×§×¨×¨'"
                ],
                correctIdx: 1,
                costBase: 1500,
                rewardBase: 2500
            },
            {
                id: 'health-inspection',
                cat: 'crisis',
                title: "×¤×™×§×•×— ×‘×¨×™××•×ª ğŸŒ¡ï¸",
                text: "×‘×™×§×•×¨×ª ×¤×ª×¢ ××”×¢×™×¨×™×™×” × ×›× ×¡×ª. ×”××§×•× ×§×¦×ª ××‘×•×œ×’×Ÿ, ××‘×œ ×”××•×›×œ × ×§×™.",
                opts: [
                    "×œ×”×¨×‘×™×¥ ×¤×× ×™×§×” ×•×œ×”×ª×—×™×œ ×œ×¦×¢×•×§ ×¢×œ ×”×¢×•×‘×“×™× ×ª×•×š ×›×“×™",
                    "×œ×”×™×•×ª ×¨×’×•×¢, ×œ×©×ª×£ ×¤×¢×•×œ×”, ×œ×”×¡×‘×™×¨ ×ª×”×œ×™×›×™×, ×•×œ×ª×ª ×ª×—×•×©×” ××§×¦×•×¢×™×ª",
                    "×œ× ×¡×•×ª ×œ×”×¡×ª×™×¨ ×“×‘×¨×™× ×•×œ×©×§×¨"
                ],
                correctIdx: 1,
                costBase: 0,
                rewardBase: 1200
            },
            {
                id: 'menu-change',
                cat: 'marketing',
                title: "×¨×¢×™×•×Ÿ ×œ×ª×¤×¨×™×˜ ×—×“×©",
                text: "×—×‘×¨ ××¦×™×¢ ×©×ª×•×¡×™×£ ×¢×•×“ 15 ×¡×•×’×™ ×× ×•×ª ×—×“×©×™× ×œ×ª×¤×¨×™×˜.",
                opts: [
                    "×œ×”×•×¡×™×£ ×”×›×•×œ â€“ ×©×™×¨××• ×©×™×© ×”××•×Ÿ ×‘×—×™×¨×”",
                    "×œ×‘×—×•×Ÿ 1â€“2 ×× ×•×ª ×—×“×©×•×ª ×›× ×¡×™×•×Ÿ, ×œ××“×•×“ ×¨×•×•×—×™×•×ª ×•×‘×™×§×•×©",
                    "×œ× ×œ×©× ×•×ª ×›×œ×•× ×œ×¢×•×œ×"
                ],
                correctIdx: 1,
                costBase: 400,
                rewardBase: 900
            },
            {
                id: 'big-order-school',
                cat: 'finance',
                title: "×”×–×× ×” ×’×“×•×œ×” ××‘×™×ª ×¡×¤×¨",
                text: "×‘×™×ª ×¡×¤×¨ ××¦×™×¢ ×”×–×× ×” ×©×œ 120 ×˜×•×¡×˜×™× ×œ××—×¨ ×‘×‘×•×§×¨ ×‘××—×™×¨ ×§×¦×ª × ××•×š ××”×¨×’×™×œ.",
                opts: [
                    "××¡×¨×‘ â€“ '×× ×™ ×œ× ××•×¨×™×“ ××—×™×¨'",
                    "×‘×•×“×§ ×¢×œ×•×™×•×ª, ××“×‘×¨ ×¢×œ ×›××•×ª ×§×‘×•×¢×”, ×•×¡×•×’×¨ ××—×™×¨ ×©× ×•×ª×Ÿ ×¨×•×•×— ×¡×‘×™×¨ ×•× ×¤×— ×§×‘×•×¢",
                    "××§×‘×œ ×‘×œ×™ ×œ×‘×“×•×§ ×¢×œ×•×™×•×ª ×‘×›×œ×œ"
                ],
                correctIdx: 1,
                costBase: 1000,
                rewardBase: 3000
            },
            {
                id: 'social-media-trend',
                cat: 'marketing',
                title: "×˜×¨× ×“ ×‘×˜×™×§×˜×•×§",
                text: "××™×©×”×• ×”×¢×œ×” ×˜×¨× ×“ ×¢×œ ××œ××•×•×— ××’×•×œ×’×œ ××™×•×—×“. ×× ×©×™× ×©×•××œ×™× ×× ×™×© ××¦×œ×š ×›×–×”.",
                opts: [
                    "×œ×”×ª×¢×œ× â€“ ××™×Ÿ ×œ×™ ×›×•×— ×œ×—×™×“×•×©×™×",
                    "×œ×”×›× ×™×¡ ×’×¨×¡×” ××©×œ×š ×œ××œ××•×•×— ××™×•×—×“, ×œ×¦×œ×, ×•×œ×”×¢×œ×•×ª ×‘×¨×©×ª×•×ª",
                    "×œ×”×‘×˜×™×— ×©×™×© ×•×œ×”×‘×™× ××©×”×• ××—×¨"
                ],
                correctIdx: 1,
                costBase: 350,
                rewardBase: 1100
            }
        ];

        // ×¡×˜ ××™×¨×•×¢×™× ×©×›×‘×¨ ×©×•×—×§×•
        let usedEvents = new Set();

        // --- ××¦×‘ ×©×—×§×Ÿ ---
        let player = {
            money: 10000,
            xp: 0,
            level: 1,
            questionIndex: 0 
        };

        // ×˜×¢×™× ×”
        if (localStorage.getItem('infCeoSave')) {
            try {
                player = JSON.parse(localStorage.getItem('infCeoSave'));
            } catch (e) { console.error(e); }
        }

        renderUI();
        nextTurn(); 

        // --- ×œ×•×’×™×§×” ---

        function nextTurn() {
            checkLevelUp();
            renderUI();

            const container = document.getElementById('game-container');
            container.innerHTML = '';

            let scenario;
            if (player.questionIndex < BASE_QUESTIONS.length) {
                const base = BASE_QUESTIONS[player.questionIndex];
                scenario = {
                    cat: base.cat,
                    t: base.t,
                    q: base.q,
                    opts: base.opts,
                    a: base.a,
                    cost: 0,
                    reward: 500
                };
            } else {
                scenario = generateScenario();
            }

            renderCard(scenario);
        }

        function generateScenario() {
            // ××™×¤×•×¡ ×× × ×’××¨×• ×”×©××œ×•×ª
            if (usedEvents.size >= EVENTS.length) {
                usedEvents.clear();
                player.level++; 
            }

            const available = EVENTS.filter(ev => !usedEvents.has(ev.id));
            const ev = available[Math.floor(Math.random() * available.length)];
            usedEvents.add(ev.id);

            const difficulty = Math.max(1, 0.7 + player.level * 0.4);
            const cost = Math.floor(ev.costBase * difficulty);
            const rewardBase = ev.rewardBase || ev.costBase * 1.6;
            const reward = Math.floor(rewardBase * difficulty);

            return {
                cat: ev.cat,
                t: ev.title,
                q: ev.text,
                opts: ev.opts,
                a: ev.correctIdx,
                cost,
                reward
            };
        }

        function renderCard(scenario) {
            const container = document.getElementById('game-container');
            const catInfo = CATEGORIES[scenario.cat];

            const card = document.createElement('div');
            card.className = 'question-card';

            const color = catInfo ? catInfo.color : '#fff';
            const catName = catInfo ? catInfo.name : '×¢×¡×§';

            let html = `
                <div class="category-badge" style="background:${color}20; color:${color}">
                    ${catName}
                </div>
                <h2>${scenario.t}</h2>
                <p>${scenario.q}</p>
                <div class="options-grid">
            `;

            scenario.opts.forEach((opt, i) => {
                html += `
                    <div class="option-btn"
                         onclick="handleAnswer(this, ${i}, ${scenario.a}, ${scenario.reward}, ${scenario.cost})">
                        ${opt}
                    </div>`;
            });

            html += `</div>`;
            card.innerHTML = html;
            container.appendChild(card);
        }

        function handleAnswer(btn, selectedIdx, correctIdx, reward, potentialCost) {
            // ×× ×™×¢×ª ×œ×—×™×¦×•×ª ×›×¤×•×œ×•×ª
            const allBtns = document.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.classList.add('disabled'));

            const isCorrect = (selectedIdx === correctIdx);

            if (isCorrect) {
                btn.classList.add('correct');
                processResult(true, reward);
            } else {
                btn.classList.add('wrong');
                // ×”×“×’×©×ª ×”×ª×©×•×‘×” ×”× ×›×•× ×”
                if (allBtns[correctIdx]) {
                    allBtns[correctIdx].classList.remove('disabled');
                    allBtns[correctIdx].classList.add('correct');
                }
                const penalty = potentialCost > 0 ? potentialCost : 200 * player.level;
