<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CEO Simulator 2.0 (Balanced)</title>
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --text: #f1f5f9;
            --accent: #38bdf8;
            --finance: #4ade80;
            --marketing: #f472b6;
            --ops: #fbbf24;
            --hr: #a78bfa;
            --danger: #ef4444;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding-bottom: 80px;
        }

        /* 砖专 注 */
        header {
            background: #020617;
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid #334155;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .level-badge {
            background: var(--accent);
            color: #0f172a;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .money-badge {
            color: var(--finance);
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* 专砖转 拽专转 */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 20px;
        }

        .category-card {
            background: var(--card);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 120px;
        }

        .category-card:hover { transform: scale(1.02); }
        
        .cat-icon { font-size: 2.5rem; margin-bottom: 10px; }
        .cat-title { font-weight: bold; font-size: 1rem; }
        .progress-mini { font-size: 0.8rem; color: #94a3b8; margin-top: 5px; }

        .c-finance { border-color: var(--finance); box-shadow: 0 0 15px rgba(74, 222, 128, 0.1); }
        .c-marketing { border-color: var(--marketing); box-shadow: 0 0 15px rgba(244, 114, 182, 0.1); }
        .c-ops { border-color: var(--ops); box-shadow: 0 0 15px rgba(251, 191, 36, 0.1); }
        .c-hr { border-color: var(--hr); box-shadow: 0 0 15px rgba(167, 139, 250, 0.1); }

        /* 专  */
        .active-area {
            background: var(--card);
            margin: 20px;
            padding: 25px;
            border-radius: 20px;
            border: 1px solid #334155;
            display: none;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .lesson-tag {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-bottom: 15px;
            background: #334155;
        }

        h2 { margin-top: 0; color: var(--accent); }
        .content-text { line-height: 1.6; font-size: 1.1rem; color: #cbd5e1; margin-bottom: 25px; }

        .btn-option {
            width: 100%;
            padding: 15px;
            margin-bottom: 10px;
            background: #0f172a;
            border: 1px solid #475569;
            color: white;
            border-radius: 10px;
            text-align: right;
            cursor: pointer;
            font-size: 1rem;
            transition: 0.2s;
            box-sizing: border-box;
        }

        .btn-option:hover { background: #1e293b; border-color: var(--accent); }

        /* 转专转 */
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            display: none;
            font-weight: bold;
            text-align: center;
        }
        .f-good { background: rgba(74, 222, 128, 0.2); color: var(--finance); border: 1px solid var(--finance); }
        .f-bad { background: rgba(239, 68, 68, 0.2); color: var(--danger); border: 1px solid var(--danger); }

        .infinite-btn {
            display: block;
            width: 90%;
            margin: 30px auto;
            padding: 20px;
            background: linear-gradient(45deg, #6366f1, #8b5cf6);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

    </style>
</head>
<body>

    <header>
        <div>
            <div style="font-size:0.8rem; color:#94a3b8;">专 转</div>
            <div class="level-badge" id="rankDisplay">" 转</div>
        </div>
        <div class="money-badge" id="moneyDisplay">$10,000</div>
    </header>

    <div style="padding: 20px 20px 0 20px;">
        <h3>专 拽 :</h3>
    </div>

    <div class="grid-container">
        <div class="category-card c-finance" onclick="openCategory('finance')">
            <div class="cat-icon"></div>
            <div class="cat-title"> 驻住</div>
            <div class="progress-mini" id="prog-finance">砖注专 1</div>
        </div>
        <div class="category-card c-marketing" onclick="openCategory('marketing')">
            <div class="cat-icon"></div>
            <div class="cat-title">砖拽 专转</div>
            <div class="progress-mini" id="prog-marketing">砖注专 1</div>
        </div>
        <div class="category-card c-ops" onclick="openCategory('ops')">
            <div class="cat-icon"></div>
            <div class="cat-title">转驻注 拽</div>
            <div class="progress-mini" id="prog-ops">砖注专 1</div>
        </div>
        <div class="category-card c-hr" onclick="openCategory('hr')">
            <div class="cat-icon"></div>
            <div class="cat-title"> 注</div>
            <div class="progress-mini" id="prog-hr">砖注专 1</div>
        </div>
    </div>

    <div class="active-area" id="lessonArea">
        <div class="lesson-tag" id="lessonTag">拽专</div>
        <h2 id="lessonTitle">转专转</h2>
        <div class="content-text" id="lessonContent">转...</div>
        <div id="optionsArea"></div>
        <div class="feedback" id="feedbackArea"></div>
        <button id="nextBtn" style="display:none; width:100%; padding:15px; background:var(--accent); border:none; color:black; font-weight:bold; border-radius:10px; margin-top:15px; cursor:pointer;" onclick="closeLesson()">住专</button>
    </div>

    <button class="infinite-btn" onclick="generateRandomEvent()"> 转专 注住拽 (住驻)</button>
    
    <div style="text-align:center; margin-bottom:20px;">
        <button onclick="resetGame()" style="background:none; border:1px solid #555; color:#777; padding:5px 10px; border-radius:5px; cursor:pointer;">驻住 砖拽</button>
    </div>

    <script>
        // --- 住 转: 砖注专  ---
        const DATABASE = {
            finance: [
                { t: "转专 ", c: "  专 住祝 拽  拽专. 专  转专 (砖转 砖爪), 转专  住祝 砖住 驻注.  砖  爪转   住祝 住 注 60 , 转 注.", q: " 驻转专 注转 转专?", o: ["拽转 转  住", "拽砖 拽转 拽转 转 转砖 住驻拽", "转注"], a: 1 },
                { t: " 专 驻住 (P&L)", c: "\"  注转 拽专  专 驻住. 住转 注, 爪转 爪注, 专 . 砖  爪转 拽注转 (砖专转)  砖转转 (专 ).", q: " 爪 拽注?", o: ["拽转 住专", "砖专 专 专", "住 注 爪"], a: 1 },
                { t: "ROI (专 砖拽注)", c: "驻  爪 转砖:  -ROI?  砖拽注转 100 砖拽 驻专住 住转 150, -ROI  .  砖拽注转  砖  住转   注,   ROI.", q: "转  砖拽注?", o: ["砖专 爪驻  注转", "砖  转砖", "砖 砖拽注"], a: 0 }
            ],
            marketing: [
                { t: " 拽 注?", c: " 转专 . 转专  砖爪专 转. 转专: , 拽, 转 注.  砖转 拽 转专, 砖拽 注 驻转 住 转专.", q: " 驻 砖拽?", o: [" 注 砖 专 转专", " 驻住 拽转", "  砖"], a: 0 },
                { t: "LTV (注专  拽)", c: "拽   注住拽  驻注转. 专  砖 专 砖 砖. 拽 砖拽 -50 砖拽  专  砖 砖 砖, 砖  600 砖拽.", q: "  LTV?", o: ["注 专  注", "砖专 注 拽砖专 砖专转 注 专 ", "转注  专 拽"], a: 1 }
            ],
            ops: [
                { t: " ", c: "  住祝 砖砖 注 祝. 转专  ? 住祝 转拽注. 驻转 ? 转 驻住驻住 专转.   爪 转  (Just in Time).", q: " 住  注祝?", o: ["砖驻 专 ", ", 转 住祝 转拽注", " 住"], a: 1 },
                { t: "拽 注转", c: " 转 砖 转驻爪抓   . 拽 注转 注 住祝 注砖,  住转  专  注 砖转转 注住拽 转拽 专.", q: " 砖转 拽 注转?", o: ["转拽 专拽 砖砖专", "爪注 拽转 转拽驻转转  注 转拽转", "拽转 转 砖"], a: 1 }
            ],
            hr: [
                { t: "住 注", c: " 转住 转  砖 , 转住 转  砖 转. 注 专注 注  拽,   注转 驻砖 转专 砖专转 砖.", q: " 砖 专?", o: ["专拽 砖专 砖 拽砖", "转, 驻 转 爪转", "驻  专"], a: 1 },
                { t: "爪转 住转", c: "转   注砖转 .  转 注砖 注 砖 注 专, 转 驻住 住祝 \". 转 住, 转转 砖转 拽 爪注.", q: "  砖砖 爪?", o: ["驻 砖注 注砖 注转", "   注", "  注爪"], a: 0 }
            ]
        };

        // --- 专 专注  ( 砖) ---
        const EVENTS_TEMPLATES = [
            // --- 专注 砖 (注 驻砖专转 爪爪 拽) ---
            { text: "爪专  转驻爪抓 转! 爪专 转拽 .", opts: [" 住专 专 (-$500)", "住 转拽  拽 ", "住专 转 转  (-$1000)"], outcomes: [-500, -100, -1000] },
            { text: "拽 转 专砖转转 专转转.", opts: ["砖  转转 驻爪 (-$100)", "转转注 (住 拽 转转)", "转砖 转 (拽 )"], outcomes: [-100, -50, -800] },
            
            // --- 专注  (转!) ---
            { text: "住专 砖注转 拽拽  专!", opts: ["! (拽  转)", "转专 转 驻专住  (-$200,  专 驻)", " 转注砖 "], outcomes: [1500, 3000, 500] },
            { text: "住驻拽 转拽 爪注   注 转 .", opts: ["拽 住拽  注砖 (-$1000, 专 注转 )", "拽 专 ( 砖)", "住专 爪注"], outcomes: [2000, 0, 0] },
            { text: "砖拽注 拽 转注 注住拽 砖.", opts: ["专  5% 注住拽 转专转 ", "住专 住", "拽砖  拽"], outcomes: [5000, 0, -200] },
            { text: "转拽驻转  注! 专转 注转.", opts: ["爪 爪注 专住 (注转 砖拽 -$500)", "转专 专 专", "转注 专 (住)"], outcomes: [2500, 1000, -500] },
            { text: "爪转 100 砖拽 专.", opts: ["转住 拽驻 拽", "转拽 拽驻 注", "砖 住"], outcomes: [100, 100, 0] }
        ];

        // --- 砖转 注专转 ---
        let player = {
            money: 10000,
            rank: "\" 转",
            progress: { finance: 0, marketing: 0, ops: 0, hr: 0 }
        };

        let autoNextTimeout = null;

        if (localStorage.getItem('ceoSimSave')) {
            player = JSON.parse(localStorage.getItem('ceoSimSave'));
        }
        updateUI();

        function updateUI() {
            document.getElementById('moneyDisplay').innerText = "$" + player.money.toLocaleString();
            document.getElementById('rankDisplay').innerText = getRankName();

            document.getElementById('prog-finance').innerText = "砖注专 " + (player.progress.finance + 1);
            document.getElementById('prog-marketing').innerText = "砖注专 " + (player.progress.marketing + 1);
            document.getElementById('prog-ops').innerText = "砖注专 " + (player.progress.ops + 1);
            document.getElementById('prog-hr').innerText = "砖注专 " + (player.progress.hr + 1);
        }

        function getRankName() {
            let total = player.progress.finance + player.progress.marketing + player.progress.ops + player.progress.hr;
            if (total > 30) return "拽 注 ";
            if (total > 20) return "\" 驻专 ";
            if (total > 10) return "住\" ";
            if (total > 5) return " 住 ";
            return "\" 转 ";
        }

        function clearAutoNext() {
            if (autoNextTimeout) {
                clearTimeout(autoNextTimeout);
                autoNextTimeout = null;
            }
        }

        function openCategory(cat) {
            clearAutoNext();
            const idx = player.progress[cat];
            if (!DATABASE[cat][idx]) {
                generateRandomEvent(cat);
                return;
            }
            const lesson = DATABASE[cat][idx];
            showLessonUI(cat, lesson.t, lesson.c, lesson.q, lesson.o, lesson.a);
        }

        function generateRandomEvent(forcedCat = null) {
            clearAutoNext();
            const template = EVENTS_TEMPLATES[Math.floor(Math.random() * EVENTS_TEMPLATES.length)];
            const uiCat = forcedCat ? forcedCat : "general";
            showEventUI(uiCat, " 专注  转!", template.text, template.opts, template.outcomes, forcedCat);
        }

        function showLessonUI(cat, title, content, q, opts, correctIdx) {
            const area = document.getElementById('lessonArea');
            area.style.display = 'block';
            document.getElementById('lessonTag').innerText = getCatHebrew(cat);
            document.getElementById('lessonTag').style.backgroundColor = getCatColor(cat);
            document.getElementById('lessonTitle').innerText = title;
            document.getElementById('lessonContent').innerText = content;

            const feedback = document.getElementById('feedbackArea');
            feedback.style.display = 'none';
            
            const nextBtn = document.getElementById('nextBtn');
            nextBtn.style.display = 'none';

            const optsDiv = document.getElementById('optionsArea');
            optsDiv.innerHTML = "<p style=\"font-weight:bold;\">" + q + "</p>";

            opts.forEach((opt, i) => {
                const btn = document.createElement('div');
                btn.className = 'btn-option';
                btn.innerText = opt;
                btn.onclick = () => checkLessonAnswer(cat, i, correctIdx);
                optsDiv.appendChild(btn);
            });
            area.scrollIntoView({ behavior: "smooth" });
        }

        function checkLessonAnswer(cat, selected, correct) {
            const feedback = document.getElementById('feedbackArea');
            feedback.style.display = 'block';

            if (selected === correct) {
                feedback.className = 'feedback f-good';
                feedback.innerText = " ! +$500";
                player.money += 500;
                player.progress[cat]++;
                localStorage.setItem('ceoSimSave', JSON.stringify(player));
                updateUI();
                document.getElementById('optionsArea').innerHTML = "";

                autoNextTimeout = setTimeout(function () {
                    const idx = player.progress[cat];
                    if (DATABASE[cat][idx]) {
                        openCategory(cat);
                    } else {
                        generateRandomEvent(cat);
                    }
                }, 3000);
            } else {
                feedback.className = 'feedback f-bad';
                feedback.innerText = "注转. 住 砖.";
            }
        }

        function showEventUI(cat, title, content, opts, outcomes, forcedCat) {
            const area = document.getElementById('lessonArea');
            area.style.display = 'block';
            document.getElementById('lessonTag').innerText = "住爪";
            document.getElementById('lessonTag').style.background = "linear-gradient(45deg, #6366f1, #8b5cf6)";
            document.getElementById('lessonTitle').innerText = title;
            document.getElementById('lessonContent').innerText = content;

            const feedback = document.getElementById('feedbackArea');
            feedback.style.display = 'none';
            const nextBtn = document.getElementById('nextBtn');
            nextBtn.style.display = 'none';

            const optsDiv = document.getElementById('optionsArea');
            optsDiv.innerHTML = "";

            opts.forEach((opt, i) => {
                const btn = document.createElement('div');
                btn.className = 'btn-option';
                btn.innerText = opt;
                btn.onclick = () => resolveEvent(outcomes[i], forcedCat || null);
                optsDiv.appendChild(btn);
            });
            area.scrollIntoView({ behavior: "smooth" });
        }

        function resolveEvent(outcomeMoney, forcedCat) {
            clearAutoNext();
            const feedback = document.getElementById('feedbackArea');
            document.getElementById('optionsArea').innerHTML = "";
            feedback.style.display = 'block';

            player.money += outcomeMoney;
            localStorage.setItem('ceoSimSave', JSON.stringify(player));
            updateUI();

            if (outcomeMoney > 0) {
                feedback.className = 'feedback f-good';
                feedback.innerText = "注! 专转 $" + outcomeMoney;
            } else if (outcomeMoney < 0) {
                feedback.className = 'feedback f-bad';
                feedback.innerText = "抓'... 驻住转 $" + Math.abs(outcomeMoney);
            } else {
                feedback.className = 'feedback';
                feedback.style.border = '1px solid #ccc';
                feedback.innerText = "爪转 .  专  驻住.";
            }

            autoNextTimeout = setTimeout(function () {
                generateRandomEvent(forcedCat || null);
            }, 3000);
        }

        function closeLesson() {
            clearAutoNext();
            document.getElementById('lessonArea').style.display = 'none';
        }

        function resetGame() {
            if(confirm('驻住 ?')) {
                localStorage.removeItem('ceoSimSave');
                location.reload();
            }
        }

        function getCatHebrew(cat) {
            if (cat == 'finance') return '驻住';
            if (cat == 'marketing') return '砖拽';
            if (cat == 'ops') return '转驻注';
            if (cat == 'hr') return '砖 砖';
            return '';
        }

        function getCatColor(cat) {
            if (cat == 'finance') return 'var(--finance)';
            if (cat == 'marketing') return 'var(--marketing)';
            if (cat == 'ops') return 'var(--ops)';
            if (cat == 'hr') return 'var(--hr)';
            return '#ccc';
        }
    </script>
</body>
</html>
